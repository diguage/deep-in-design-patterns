<?xml version='1.0' encoding='UTF-8' standalone='no'?><svg contentStyleType='text/css' height='816px' preserveAspectRatio='none' style='width:1070px;height:816px;background:#FFFFFF;' version='1.1' viewBox='0 0 1070 816' width='1070px' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg' zoomAndPan='magnify'><defs/><g><rect height='62.128' style='stroke:#00000000;stroke-width:1.0;fill:none;' width='154' x='451.25' y='5'/><text fill='#000000' font-family='Source Han Sans SC' font-size='36' font-weight='bold' lengthAdjust='spacing' textLength='144' x='456.25' y='51.76'>享元模式</text><g id='elem_FlyweightFactory'><rect codeLine='25' fill='#F1F1F1' height='101.4199' id='FlyweightFactory' rx='2.5' ry='2.5' style='stroke:#181818;stroke-width:0.5;' width='423' x='89.5' y='297.128'/><ellipse cx='200.5' cy='314.698' fill='#ADD1B2' rx='12' ry='12' style='stroke:#181818;stroke-width:1.0;'/><path d='M203.5625,321.7761 Q202.875,322.1355 202.125,322.3074 Q201.375,322.4793 200.5469,322.4793 Q197.5938,322.4793 196.0313,320.5418 Q194.4844,318.5886 194.4844,314.9168 Q194.4844,311.2449 196.0313,309.3074 Q197.5938,307.3543 200.5469,307.3543 Q201.375,307.3543 202.125,307.5261 Q202.8906,307.698 203.5625,308.0574 L203.5625,311.2605 Q202.8125,310.573 202.1094,310.2605 Q201.4219,309.948 200.6719,309.948 Q199.0938,309.948 198.2813,311.198 Q197.4844,312.448 197.4844,314.9168 Q197.4844,317.3855 198.2813,318.6355 Q199.0938,319.8855 200.6719,319.8855 Q201.4219,319.8855 202.1094,319.573 Q202.8125,319.2605 203.5625,318.573 L203.5625,321.7761 Z ' fill='#000000'/><text fill='#000000' font-family='Source Code Pro' font-size='20' lengthAdjust='spacing' textLength='192' x='222.5' y='321.808'>FlyweightFactory</text><line style='stroke:#181818;stroke-width:0.5;' x1='90.5' x2='511.5' y1='332.268' y2='332.268'/><rect fill='none' height='6' style='stroke:#C82930;stroke-width:1.0;' width='6' x='97.5' y='340.268'/><text fill='#000000' font-family='Source Code Pro' font-size='20' lengthAdjust='spacing' textLength='252' x='110.5' y='355.948'>flyWeights :FlyWeight</text><line style='stroke:#181818;stroke-width:0.5;' x1='90.5' x2='511.5' y1='365.408' y2='365.408'/><ellipse cx='100.5' cy='376.408' fill='#84BE84' rx='3' ry='3' style='stroke:#038048;stroke-width:1.0;'/><text fill='#000000' font-family='Source Code Pro' font-size='20' lengthAdjust='spacing' textLength='396' x='110.5' y='389.088'>getFlyWeight(key :int) :FlyWeight</text></g><g id='elem_GMN478'><path d='M34,79.128 L34,232.8279 A0,0 0 0 0 34,232.8279 L283.26,232.8279 L294.48,292.928 L291.26,232.8279 L522,232.8279 A0,0 0 0 0 522,232.8279 L522,89.128 L512,79.128 L34,79.128 A0,0 0 0 0 34,79.128 ' fill='#FEFFDD' style='stroke:#181818;stroke-width:0.5;'/><path d='M512,79.128 L512,89.128 L522,89.128 L512,79.128 ' fill='#FEFFDD' style='stroke:#181818;stroke-width:0.5;'/><text fill='#000000' font-family='Source Han Serif SC' font-size='20' lengthAdjust='spacing' textLength='451' x='40' y='107.148'>一个享元工厂，用来创建并管理 FlyWeight 对象。</text><text fill='#000000' font-family='Source Han Serif SC' font-size='20' lengthAdjust='spacing' textLength='386' x='40' y='135.888'>它主要是用来确保合理地共享 FlyWeight，</text><text fill='#000000' font-family='Source Han Serif SC' font-size='20' lengthAdjust='spacing' textLength='462' x='40' y='164.6279'>当用户请求一个 FlyWeight 时，FlyweightFactory</text><text fill='#000000' font-family='Source Han Serif SC' font-size='20' lengthAdjust='spacing' textLength='360' x='40' y='193.3679'>对象提供一个已创建的实例或者创建一个</text><text fill='#000000' font-family='Source Han Serif SC' font-size='20' lengthAdjust='spacing' textLength='200' x='40' y='222.1079'>（如果不存在的话）。</text></g><g id='elem_FlyWeight'><rect codeLine='31' fill='#F1F1F1' height='76.28' id='FlyWeight' rx='2.5' ry='2.5' style='stroke:#181818;stroke-width:0.5;' width='399' x='620.5' y='309.628'/><ellipse cx='761.5' cy='327.198' fill='#A9DCDF' rx='12' ry='12' style='stroke:#181818;stroke-width:1.0;'/><path d='M761.5156,322.0105 L760.1563,327.9636 L762.8906,327.9636 L761.5156,322.0105 Z M759.7656,319.3699 L763.2813,319.3699 L767.2188,333.948 L764.3438,333.948 L763.4375,330.3386 L759.5781,330.3386 L758.7031,333.948 L755.8281,333.948 L759.7656,319.3699 Z ' fill='#000000'/><text fill='#000000' font-family='Source Code Pro' font-size='20' font-style='italic' lengthAdjust='spacing' textLength='108' x='783.5' y='334.308'>FlyWeight</text><line style='stroke:#181818;stroke-width:0.5;' x1='621.5' x2='1018.5' y1='344.768' y2='344.768'/><line style='stroke:#181818;stroke-width:0.5;' x1='621.5' x2='1018.5' y1='352.768' y2='352.768'/><ellipse cx='631.5' cy='363.768' fill='#84BE84' rx='3' ry='3' style='stroke:#038048;stroke-width:1.0;'/><text fill='#000000' font-family='Source Code Pro' font-size='20' font-style='italic' lengthAdjust='spacing' textLength='372' x='641.5' y='376.448'>operation(extrinsticState :int)</text></g><g id='elem_GMN482'><path d='M622.5,122.628 L622.5,190.108 A0,0 0 0 0 622.5,190.108 L835.05,190.108 L824.49,309.618 L843.05,190.108 L1063.5,190.108 A0,0 0 0 0 1063.5,190.108 L1063.5,132.628 L1053.5,122.628 L622.5,122.628 A0,0 0 0 0 622.5,122.628 ' fill='#FEFFDD' style='stroke:#181818;stroke-width:0.5;'/><path d='M1053.5,122.628 L1053.5,132.628 L1063.5,132.628 L1053.5,122.628 ' fill='#FEFFDD' style='stroke:#181818;stroke-width:0.5;'/><text fill='#000000' font-family='Source Han Serif SC' font-size='20' lengthAdjust='spacing' textLength='420' x='628.5' y='150.648'>所有具体享元类的超类或接口，通过这个接口，</text><text fill='#000000' font-family='Source Han Serif SC' font-size='20' lengthAdjust='spacing' textLength='366' x='628.5' y='179.388'>FlyWeight 可以接受并作用于外部状态。</text></g><g id='elem_ConcreteFlyWeight'><rect codeLine='36' fill='#F1F1F1' height='76.28' id='ConcreteFlyWeight' rx='2.5' ry='2.5' style='stroke:#181818;stroke-width:0.5;' width='399' x='620.5' y='573.128'/><ellipse cx='713.5' cy='590.698' fill='#ADD1B2' rx='12' ry='12' style='stroke:#181818;stroke-width:1.0;'/><path d='M716.5625,597.7761 Q715.875,598.1355 715.125,598.3074 Q714.375,598.4793 713.5469,598.4793 Q710.5938,598.4793 709.0313,596.5418 Q707.4844,594.5886 707.4844,590.9168 Q707.4844,587.2449 709.0313,585.3074 Q710.5938,583.3543 713.5469,583.3543 Q714.375,583.3543 715.125,583.5261 Q715.8906,583.698 716.5625,584.0574 L716.5625,587.2605 Q715.8125,586.573 715.1094,586.2605 Q714.4219,585.948 713.6719,585.948 Q712.0938,585.948 711.2813,587.198 Q710.4844,588.448 710.4844,590.9168 Q710.4844,593.3855 711.2813,594.6355 Q712.0938,595.8855 713.6719,595.8855 Q714.4219,595.8855 715.1094,595.573 Q715.8125,595.2605 716.5625,594.573 L716.5625,597.7761 Z ' fill='#000000'/><text fill='#000000' font-family='Source Code Pro' font-size='20' lengthAdjust='spacing' textLength='204' x='735.5' y='597.808'>ConcreteFlyWeight</text><line style='stroke:#181818;stroke-width:0.5;' x1='621.5' x2='1018.5' y1='608.268' y2='608.268'/><line style='stroke:#181818;stroke-width:0.5;' x1='621.5' x2='1018.5' y1='616.268' y2='616.268'/><ellipse cx='631.5' cy='627.268' fill='#84BE84' rx='3' ry='3' style='stroke:#038048;stroke-width:1.0;'/><text fill='#000000' font-family='Source Code Pro' font-size='20' lengthAdjust='spacing' textLength='372' x='641.5' y='639.948'>operation(extrinsticState :int)</text></g><g id='elem_GMN486'><path d='M638.5,709.128 L638.5,776.608 A0,0 0 0 0 638.5,776.608 L1061.5,776.608 A0,0 0 0 0 1061.5,776.608 L1061.5,719.128 L1051.5,709.128 L846.42,709.128 L828.6,649.238 L838.42,709.128 L638.5,709.128 A0,0 0 0 0 638.5,709.128 ' fill='#FEFFDD' style='stroke:#181818;stroke-width:0.5;'/><path d='M1051.5,709.128 L1051.5,719.128 L1061.5,719.128 L1051.5,709.128 ' fill='#FEFFDD' style='stroke:#181818;stroke-width:0.5;'/><text fill='#000000' font-family='Source Han Serif SC' font-size='20' lengthAdjust='spacing' textLength='402' x='644.5' y='737.148'>继承 FlyWeight 类或实现 FlyWeight 接口，</text><text fill='#000000' font-family='Source Han Serif SC' font-size='20' lengthAdjust='spacing' textLength='260' x='644.5' y='765.888'>并为内部状态增加存储空间。</text></g><g id='elem_UnsharedConcreteFlyWeight'><rect codeLine='41' fill='#F1F1F1' height='76.28' id='UnsharedConcreteFlyWeight' rx='2.5' ry='2.5' style='stroke:#181818;stroke-width:0.5;' width='399' x='111.5' y='573.128'/><ellipse cx='156.75' cy='590.698' fill='#ADD1B2' rx='12' ry='12' style='stroke:#181818;stroke-width:1.0;'/><path d='M159.8125,597.7761 Q159.125,598.1355 158.375,598.3074 Q157.625,598.4793 156.7969,598.4793 Q153.8438,598.4793 152.2813,596.5418 Q150.7344,594.5886 150.7344,590.9168 Q150.7344,587.2449 152.2813,585.3074 Q153.8438,583.3543 156.7969,583.3543 Q157.625,583.3543 158.375,583.5261 Q159.1406,583.698 159.8125,584.0574 L159.8125,587.2605 Q159.0625,586.573 158.3594,586.2605 Q157.6719,585.948 156.9219,585.948 Q155.3438,585.948 154.5313,587.198 Q153.7344,588.448 153.7344,590.9168 Q153.7344,593.3855 154.5313,594.6355 Q155.3438,595.8855 156.9219,595.8855 Q157.6719,595.8855 158.3594,595.573 Q159.0625,595.2605 159.8125,594.573 L159.8125,597.7761 Z ' fill='#000000'/><text fill='#000000' font-family='Source Code Pro' font-size='20' lengthAdjust='spacing' textLength='300' x='178.25' y='597.808'>UnsharedConcreteFlyWeight</text><line style='stroke:#181818;stroke-width:0.5;' x1='112.5' x2='509.5' y1='608.268' y2='608.268'/><line style='stroke:#181818;stroke-width:0.5;' x1='112.5' x2='509.5' y1='616.268' y2='616.268'/><ellipse cx='122.5' cy='627.268' fill='#84BE84' rx='3' ry='3' style='stroke:#038048;stroke-width:1.0;'/><text fill='#000000' font-family='Source Code Pro' font-size='20' lengthAdjust='spacing' textLength='372' x='132.5' y='639.948'>operation(extrinsticState :int)</text></g><g id='elem_GMN490'><path d='M6,709.128 L6,776.608 A0,0 0 0 0 6,776.608 L538,776.608 A0,0 0 0 0 538,776.608 L538,719.128 L528,709.128 L285.85,709.128 L299.82,649.238 L277.85,709.128 L6,709.128 A0,0 0 0 0 6,709.128 ' fill='#FEFFDD' style='stroke:#181818;stroke-width:0.5;'/><path d='M528,709.128 L528,719.128 L538,719.128 L528,709.128 ' fill='#FEFFDD' style='stroke:#181818;stroke-width:0.5;'/><text fill='#000000' font-family='Source Han Serif SC' font-size='20' lengthAdjust='spacing' textLength='351' x='12' y='737.148'>指那些不需要共享的 FlyWeight 子类。</text><text fill='#000000' font-family='Source Han Serif SC' font-size='20' lengthAdjust='spacing' textLength='511' x='12' y='765.888'>因为 FlyWeight 接口共享成为可能，但它并不强制共享。</text></g><g id='elem_Client'><rect codeLine='46' fill='#F1F1F1' height='51.14' id='Client' rx='2.5' ry='2.5' style='stroke:#181818;stroke-width:0.5;' width='106' x='258' y='462.128'/><ellipse cx='274' cy='479.698' fill='#ADD1B2' rx='12' ry='12' style='stroke:#181818;stroke-width:1.0;'/><path d='M277.0625,486.7761 Q276.375,487.1355 275.625,487.3074 Q274.875,487.4793 274.0469,487.4793 Q271.0938,487.4793 269.5313,485.5418 Q267.9844,483.5886 267.9844,479.9168 Q267.9844,476.2449 269.5313,474.3074 Q271.0938,472.3543 274.0469,472.3543 Q274.875,472.3543 275.625,472.5261 Q276.3906,472.698 277.0625,473.0574 L277.0625,476.2605 Q276.3125,475.573 275.6094,475.2605 Q274.9219,474.948 274.1719,474.948 Q272.5938,474.948 271.7813,476.198 Q270.9844,477.448 270.9844,479.9168 Q270.9844,482.3855 271.7813,483.6355 Q272.5938,484.8855 274.1719,484.8855 Q274.9219,484.8855 275.6094,484.573 Q276.3125,484.2605 277.0625,483.573 L277.0625,486.7761 Z ' fill='#000000'/><text fill='#000000' font-family='Source Code Pro' font-size='20' lengthAdjust='spacing' textLength='72' x='289' y='486.808'>Client</text><line style='stroke:#181818;stroke-width:0.5;' x1='259' x2='363' y1='497.268' y2='497.268'/><line style='stroke:#181818;stroke-width:0.5;' x1='259' x2='363' y1='505.268' y2='505.268'/></g><g id='link_FlyweightFactory_FlyWeight'><path codeLine='48' d='M516.9104,333.2697 C516.9104,333.2697 663.5,387.468 723.63,386.028 ' fill='none' id='FlyweightFactory-FlyWeight' style='stroke:#181818;stroke-width:1.0;'/><polygon fill='#181818' points='733.87,385.638,724.7268,381.9772,728.8735,385.8249,725.0258,389.9716,733.87,385.638' style='stroke:#181818;stroke-width:1.0;'/><line style='stroke:#181818;stroke-width:1.0;' x1='728.8735' x2='720.88' y1='385.8249' y2='386.133'/><polygon fill='none' points='514,321.628,511.5746,328.419,516.9104,333.2697,519.3358,326.4787,514,321.628' style='stroke:#181818;stroke-width:1.0;'/><text fill='#000000' font-family='Source Han Serif SC' font-size='20' lengthAdjust='spacing' textLength='112' x='500.1237' y='343.3728'>-flyWeights</text></g><g id='link_FlyWeight_ConcreteFlyWeight'><path codeLine='50' d='M820,406.118 C820,456.938 820,529.568 820,573.068 ' fill='none' id='FlyWeight-backto-ConcreteFlyWeight' style='stroke:#181818;stroke-width:1.0;'/><polygon fill='none' points='813,405.818,820,385.818,827,405.818,813,405.818' style='stroke:#181818;stroke-width:1.0;'/></g><g id='link_FlyWeight_UnsharedConcreteFlyWeight'><path codeLine='51' d='M729.82,394.958 C630.96,445.748 474.31,526.228 383.22,573.028 ' fill='none' id='FlyWeight-backto-UnsharedConcreteFlyWeight' style='stroke:#181818;stroke-width:1.0;'/><polygon fill='none' points='726.89,388.588,747.88,385.678,733.29,401.048,726.89,388.588' style='stroke:#181818;stroke-width:1.0;'/></g><g id='link_FlyweightFactory_Client'><path codeLine='53' d='M305.28,407.718 C306.66,426.788 308.12,446.878 309.22,462.018 ' fill='none' id='FlyweightFactory-backto-Client' style='stroke:#181818;stroke-width:1.0;'/><polygon fill='#181818' points='304.89,402.378,301.5433,411.6408,305.2473,407.3652,309.5228,411.0692,304.89,402.378' style='stroke:#181818;stroke-width:1.0;'/></g><g id='link_Client_ConcreteFlyWeight'><path codeLine='55' d='M364.03,501.288 C433.45,517.858 558.24,547.648 659.74,571.868 ' fill='none' id='Client-to-ConcreteFlyWeight' style='stroke:#181818;stroke-width:1.0;'/><polygon fill='#181818' points='664.86,573.098,657.0281,567.1264,659.9954,571.9425,655.1792,574.9098,664.86,573.098' style='stroke:#181818;stroke-width:1.0;'/></g><g id='link_Client_UnsharedConcreteFlyWeight'><path codeLine='56' d='M311,513.218 C311,528.938 311,549.728 311,568.028 ' fill='none' id='Client-to-UnsharedConcreteFlyWeight' style='stroke:#181818;stroke-width:1.0;'/><polygon fill='#181818' points='311,573.118,315,564.118,311,568.118,307,564.118,311,573.118' style='stroke:#181818;stroke-width:1.0;'/></g><rect height='26.0638' style='stroke:#00000000;stroke-width:1.0;fill:none;' width='355' x='350.75' y='782.608'/><text fill='#888888' font-family='Source Han Sans SC' font-size='18' lengthAdjust='spacing' textLength='355' x='350.75' y='803.4878'>D瓜哥 · https://www.diguage.com · 出品</text></g></svg>